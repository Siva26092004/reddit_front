<div class="create-post-page">
  <h2>Create New Post</h2>
  {{#if auth.isAuthenticated}}
    <p class="user-info">Posting as: <strong>{{auth.currentUser.username}}</strong> (ID: {{auth.currentUser.id}})</p>
    <form {{action 'createPost' on='submit'}}>
      <div class="form-group">
        <label for="subreddit">Select Subreddit:</label>
        <select id="subreddit" onchange={{action (mut subredditId) value="target.value"}} disabled={{isLoading}}>
          <option value="">Choose a subreddit</option>
          {{#each subreddits as |subreddit|}}
            <option value="{{subreddit.id}}" selected={{eq subredditId subreddit.id}}>r/{{subreddit.name}}</option>
          {{/each}}
        </select>
      </div>
      <div class="form-group">
        <label for="title">Post Title:</label>
        {{input type="text" id="title" value=title placeholder="Enter post title" disabled=isLoading}}
      </div>
      <div class="form-group">
        <label for="content">Content:</label>
        {{textarea id="content" value=content placeholder="Write your post content here..." disabled=isLoading}}
      </div>

      <div class="form-group">
        <label for="mediaFile">Upload Image/Video (Optional):</label>
        <input type="file" id="mediaFile" onchange={{action (mut mediaFile) value="target.files.0"}} accept="image/*,video/*" disabled={{isLoading}}>
        {{#if mediaFile}}
          <p class="file-selected">Selected: {{mediaFile.name}}</p>
        {{/if}}
      </div>
      
      <div class="form-actions">
        <button type="submit" class="btn btn-primary" disabled={{isLoading}}>
          {{#if isLoading}}Creating Post...{{else}}Create Post{{/if}}
        </button>
        <button type="button" {{action 'cancelPost'}} class="btn btn-secondary" disabled={{isLoading}}>Cancel</button>
      </div>
    </form>
  {{else}}
    <div class="auth-required">
      <p>You must be logged in to create a post.</p>
      {{#link-to 'login' class="btn btn-primary"}}Login{{/link-to}}
      {{#link-to 'register' class="btn btn-secondary"}}Register{{/link-to}}
    </div>
  {{/if}}
</div>

